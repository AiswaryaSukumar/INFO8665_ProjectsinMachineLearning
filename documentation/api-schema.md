# INSIGHT-311 — Ticket API Schema (Use Case 1)

**Purpose:**  
Defines the structured service request generated by INSIGHT-311 after
AI-assisted phone intake, human confirmation, and escalation checks.

This schema represents the system output of Use Case 1 and serves as the
input for downstream workflows (dispatch, duplicate detection, reporting).

---

## 1) Ticket Metadata
- ticket_id: string (system-generated UUID)
- created_timestamp: ISO 8601 datetime
- channel: "phone"
- language: string (optional)

---

## 2) Classification & Decision Support Output
- predicted_category: string
- confidence_score: float (0.00–1.00)
- explanation_snippet: string (keywords / rationale)

---

## 3) Human-in-the-loop Controls
- caller_confirmed_category: boolean
- final_category: string
- clarification_count: integer
- escalated_to_human: boolean
- escalation_reason: string (optional)

---

## 4) Location Information
- location_text: string
- location_type: address / intersection / landmark / unknown

---

## 5) Issue Description
- issue_summary: string
- urgency_flag: low / normal / high (prototype)

---

## 6) Category-Specific Extensions
- category_payload: object  
  (Dynamic fields based on confirmed category)

Examples:
- Graffiti → structure_type, property_context
- Garbage → collection_type, missed_or_delayed
- Pothole → size_estimate, safety_hazard

---

## 7) Governance & Audit Flags
- emergency_detected: boolean
- emergency_phrase: string (optional)
- audit_log_id: string

---

## 8) Example Ticket Payload (Snapshot)

```json
{
  "ticket_id": "311-2026-00123",
  "created_timestamp": "2026-01-30T10:45:00Z",
  "channel": "phone",
  "predicted_category": "Missed / Delayed Garbage Pickup",
  "confidence_score": 0.86,
  "caller_confirmed_category": true,
  "final_category": "Missed / Delayed Garbage Pickup",
  "location_text": "55 King Street",
  "issue_summary": "Garbage was not picked up on the scheduled day.",
  "escalated_to_human": false,
  "emergency_detected": false
}
